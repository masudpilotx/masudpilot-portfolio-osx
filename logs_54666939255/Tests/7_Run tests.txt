2026-01-17T21:23:47.9267248Z ##[group]Run npx ava tests/*.test.js --timeout=1m
2026-01-17T21:23:47.9267609Z [36;1mnpx ava tests/*.test.js --timeout=1m[0m
2026-01-17T21:23:47.9297495Z shell: /usr/bin/bash -e {0}
2026-01-17T21:23:47.9297723Z env:
2026-01-17T21:23:47.9297900Z   PR_AUTHOR: masudpilotx
2026-01-17T21:23:47.9298120Z   PR_AUTHOR_ID: 247460083
2026-01-17T21:23:47.9298321Z   PR_LABELS: []
2026-01-17T21:23:47.9298517Z   CHANGED_FILES: ["domains/pilot.json"]
2026-01-17T21:23:47.9298754Z   DELETED_FILES: []
2026-01-17T21:23:47.9298935Z ##[endgroup]
2026-01-17T21:23:48.5642949Z 
2026-01-17T21:23:49.0965140Z   ✔ json › JSON files should not be in the root directory (322ms)
2026-01-17T21:23:49.0973330Z   ✔ json › All files should be valid JSON (321ms)
2026-01-17T21:23:49.0974908Z   ✔ json › All files should have valid file names (181ms)
2026-01-17T21:23:49.2137931Z   ✔ domains › Nested subdomains should not exist without a parent subdomain (440ms)
2026-01-17T21:23:49.2139654Z   ✔ domains › Nested subdomains should not exist if any parent subdomain has NS records (380ms)
2026-01-17T21:23:49.2141730Z   ✔ domains › Nested subdomains should be owned by the parent subdomain's owner (203ms)
2026-01-17T21:23:49.2148242Z   ✔ domains › Users are limited to one single character subdomain (111ms)
2026-01-17T21:23:49.4913561Z   ✔ pr › Users can only update their own subdomains
2026-01-17T21:23:49.9663920Z   ✔ proxy › Domains with proxy enabled must have at least one proxy-able record (218ms)
2026-01-17T21:23:49.9664917Z   ✔ proxy › Domains with specific records must not have proxy enabled
2026-01-17T21:23:50.4571644Z   ✘ [fail]: records › All files should have valid records Error thrown in test
2026-01-17T21:23:50.4579009Z   ✘ [fail]: records › Root subdomains should have at least one usable record Error thrown in test
2026-01-17T21:23:50.4943697Z   ✘ [fail]: json › All files should have valid required and optional fields pilot.json: Missing required field: records
2026-01-17T21:23:50.8858518Z 
2026-01-17T21:23:50.8858985Z   Unhandled rejection in tests/json.test.js
2026-01-17T21:23:50.8859426Z 
2026-01-17T21:23:50.8859558Z   tests/json.test.js:91
2026-01-17T21:23:50.8859776Z 
2026-01-17T21:23:50.8860737Z    90:         } else if (fields === requiredFields || fields === requiredOwner…
2026-01-17T21:23:50.8861749Z    91:             t.true(false, `${file}: Missing required field: ${fieldPath}…
2026-01-17T21:23:50.8862365Z    92:         }                                                                
2026-01-17T21:23:50.8862721Z 
2026-01-17T21:23:50.8862870Z   TestFailure: The test has failed
2026-01-17T21:23:50.8863142Z 
2026-01-17T21:23:50.8863797Z   › validateFields (tests/json.test.js:91:19)
2026-01-17T21:23:50.8864356Z   › processFile (tests/json.test.js:133:5)
2026-01-17T21:23:50.8864868Z   › async tests/json.test.js:177:5
2026-01-17T21:23:50.8865143Z 
2026-01-17T21:23:50.8880185Z   ✘ tests/json.test.js exited with a non-zero exit code: 1
2026-01-17T21:23:50.8901491Z   ─
2026-01-17T21:23:50.8901649Z 
2026-01-17T21:23:50.8901903Z   records › All files should have valid records
2026-01-17T21:23:50.8902254Z 
2026-01-17T21:23:50.8902379Z   Error thrown in test:
2026-01-17T21:23:50.8902582Z 
2026-01-17T21:23:50.8902692Z   TypeError {
2026-01-17T21:23:50.8903063Z     message: 'Cannot convert undefined or null to object',
2026-01-17T21:23:50.8903518Z   }
2026-01-17T21:23:50.8903656Z 
2026-01-17T21:23:50.8903858Z   TypeError: Cannot convert undefined or null to object
2026-01-17T21:23:50.8904345Z       at Function.keys (<anonymous>)
2026-01-17T21:23:50.8904895Z       at /home/runner/work/register/register/tests/records.test.js:284:35
2026-01-17T21:23:50.8905507Z       at Array.forEach (<anonymous>)
2026-01-17T21:23:50.8906047Z       at /home/runner/work/register/register/tests/records.test.js:282:11
2026-01-17T21:23:50.8906618Z       at Test.callFn (file:///home/runner/work/register/register/node_modules/ava/lib/test.js:525:26)
2026-01-17T21:23:50.8907252Z       at Test.run (file:///home/runner/work/register/register/node_modules/ava/lib/test.js:534:33)
2026-01-17T21:23:50.8908169Z       at Runner.runSingle (file:///home/runner/work/register/register/node_modules/ava/lib/runner.js:280:33)
2026-01-17T21:23:50.8908857Z       at Runner.runTest (file:///home/runner/work/register/register/node_modules/ava/lib/runner.js:362:30)
2026-01-17T21:23:50.8909462Z       at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
2026-01-17T21:23:50.8909879Z       at async Promise.all (index 0)
2026-01-17T21:23:50.8910047Z 
2026-01-17T21:23:50.8910051Z 
2026-01-17T21:23:50.8910056Z 
2026-01-17T21:23:50.8910305Z   records › Root subdomains should have at least one usable record
2026-01-17T21:23:50.8910570Z 
2026-01-17T21:23:50.8910645Z   Error thrown in test:
2026-01-17T21:23:50.8910773Z 
2026-01-17T21:23:50.8911041Z   TypeError {
2026-01-17T21:23:50.8911280Z     message: 'Cannot convert undefined or null to object',
2026-01-17T21:23:50.8911568Z   }
2026-01-17T21:23:50.8911653Z 
2026-01-17T21:23:50.8911776Z   TypeError: Cannot convert undefined or null to object
2026-01-17T21:23:50.8912082Z       at Function.keys (<anonymous>)
2026-01-17T21:23:50.8912417Z       at /home/runner/work/register/register/tests/records.test.js:337:35
2026-01-17T21:23:50.8912756Z       at Array.forEach (<anonymous>)
2026-01-17T21:23:50.8913073Z       at /home/runner/work/register/register/tests/records.test.js:332:11
2026-01-17T21:23:50.8913577Z       at Test.callFn (file:///home/runner/work/register/register/node_modules/ava/lib/test.js:525:26)
2026-01-17T21:23:50.8914171Z       at Test.run (file:///home/runner/work/register/register/node_modules/ava/lib/test.js:534:33)
2026-01-17T21:23:50.8914790Z       at Runner.runSingle (file:///home/runner/work/register/register/node_modules/ava/lib/runner.js:280:33)
2026-01-17T21:23:50.8915433Z       at Runner.runTest (file:///home/runner/work/register/register/node_modules/ava/lib/runner.js:362:30)
2026-01-17T21:23:50.8916012Z       at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
2026-01-17T21:23:50.8916400Z       at async Promise.all (index 1)
2026-01-17T21:23:50.8916565Z 
2026-01-17T21:23:50.8916569Z 
2026-01-17T21:23:50.8916573Z 
2026-01-17T21:23:50.8916776Z   json › All files should have valid required and optional fields
2026-01-17T21:23:50.8917022Z 
2026-01-17T21:23:50.8917101Z   tests/json.test.js:91
2026-01-17T21:23:50.8917225Z 
2026-01-17T21:23:50.8917475Z    90:         } else if (fields === requiredFields || fields === requiredOwner…
2026-01-17T21:23:50.8917930Z    91:             t.true(false, `${file}: Missing required field: ${fieldPath}…
2026-01-17T21:23:50.8918274Z    92:         }                                                                
2026-01-17T21:23:50.8918750Z 
2026-01-17T21:23:50.8918858Z   pilot.json: Missing required field: records
2026-01-17T21:23:50.8919046Z 
2026-01-17T21:23:50.8919119Z   Value is not `true`:
2026-01-17T21:23:50.8919244Z 
2026-01-17T21:23:50.8919310Z   false
2026-01-17T21:23:50.8919405Z 
2026-01-17T21:23:50.8919556Z   › validateFields (tests/json.test.js:91:19)
2026-01-17T21:23:50.8919872Z   › processFile (tests/json.test.js:133:5)
2026-01-17T21:23:50.8920164Z   › async tests/json.test.js:177:5
2026-01-17T21:23:50.8920322Z 
2026-01-17T21:23:50.8920392Z   ─
2026-01-17T21:23:50.8920482Z 
2026-01-17T21:23:50.8920549Z   3 tests failed
2026-01-17T21:23:50.8920726Z   1 unhandled rejection
2026-01-17T21:23:50.9086899Z ##[error]Process completed with exit code 1.
